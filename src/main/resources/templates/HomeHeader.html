<nav class="navbar navbar-expand-lg" th:fragment="header">

    <div class="container">
        <a class="navbar-brand" th:href="@{/}">
            <i class="bi-back"></i>
            <span>QuizTest</span>
        </a>

        <div class="d-lg-none ms-auto me-4">
            <a href="#top" class="navbar-icon bi-person smoothscroll nav_iconPerson"></a>
        </div>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-lg-5 me-lg-auto">
                <li class="nav-item">
                    <a class="nav-link click-scroll"href="/" onclick="navigateToSection('section_1')">Home</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link click-scroll" href="/" onclick="navigateToSection('section_2')">List Quizzes</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link click-scroll" href="/" onclick="navigateToSection('section_3')">How it works</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link click-scroll" href="/" onclick="navigateToSection('section_5')">Contact</a>
                </li>
                <script>
                    function navigateToSection(sectionId) {
                        event.preventDefault(); // Ngăn chặn hành động mặc định của liên kết
                        window.location.href = "/#" + sectionId;

                        // Cuộn xuống phần có id được chỉ định sau khi chuyển hướng
                        setTimeout(function() {
                            var section = document.getElementById(sectionId);
                            if (section) {
                                section.scrollIntoView({ behavior: 'smooth' });
                            }
                        }, 500); // Đợi 0.5 giây trước khi cuộn để đảm bảo trang đã được tải đầy đủ
                    }
                </script>
            </ul>
            <form method="get" th:action="@{'/' + '?keyword=' + ${keyword} + (${subject != null ? '&subject=' + subject : ''}) + '#section_2'}" class="custom-form mt-4 pt-2 mb-lg-0 mb-5 inline-block-div" role="search">
                <div class="input-group input-group-sm hidden-xs" style="width: 400px;">
                    <input type="text" name="keyword" class="form-control pull-right" placeholder="Search">
                    <input type="hidden" th:if="${subject != null}" name="subject" th:value="${subject}">
                    <div class="input-group-btn">
                        <button type="submit" class="btn btn-default"><i class="fa fa-search"></i> Search</button>
                    </div>
                </div>
            </form>
            <div class="d-none d-lg-block inline-block-div"  >
                <a href="#top" class="navbar-icon bi bi-bell smoothscroll"></a>
            </div>

            <style>
                /* Style cho dropdown */
                .dropdown {
                    position: relative;
                    display: inline-block;
                }

                /* Style cho nội dung của dropdown */
                .dropdown-content {
                    display: none;
                    position: absolute;
                    background-color: #f9f9f9;
                    min-width: 160px;
                    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                    z-index: 1;
                }

                /* Style cho mỗi mục trong dropdown */
                .dropdown-content a {
                    color: black;
                    padding: 12px 16px;
                    text-decoration: none;
                    display: block;
                }

                /* Hover style cho mỗi mục trong dropdown */
                .dropdown-content a:hover {background-color: #f1f1f1;}

                /* Hiển thị dropdown khi hover */
                .dropdown:hover .dropdown-content {display: block;}

                /* Style cho popup */
                .popup {
                    display: none;
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background-color: white;
                    padding: 20px;
                    border: 1px solid #ccc;
                    border-radius: 5px;
                    z-index: 1000;
                }

                /* Style cho lớp mờ */
                .overlay {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.5); /* Màu đen với độ mờ 50% */
                    z-index: 999;
                }
            </style>
            </head>
            <body>

            <div class="dropdown">
                <!-- Button của dropdown -->
                <button class="navbar-icon bi-person smoothscroll"></button>
                <div class="dropdown-content">
                    <!-- Hiển thị thông tin người đăng nhập -->
                    <a th:href="@{/information}" class="btn btn-default btn-flat">Profile</a>
                    <!-- Hiển thị popup cho "Classes" -->
                    <a  id="showClassesPopup" class="btn btn-default btn-flat">Classes</a>
                    <a  class="btn btn-default btn-flat" href="/logout">Logout</a>
                    <!-- Thêm các mục khác tùy ý -->
                </div>
            </div>

            <!-- Popup cho "Information" -->
            <div class="popup" id="informationPopup">
                <!-- Nội dung của popup -->
                <p>Thông tin người đăng nhập</p>
                <!-- Thêm các thông tin cần hiển thị -->
                <p th:text=" 'UserName:'+ ${userName}"></p>
                <p th:text="'Email:' + ${userEmail}"></p>
                <p th:text="'Phone:' + ${userPhone}"></p>
                <!-- Thêm các thông tin khác tùy ý -->
                <!-- Button để đóng popup -->
                <button id="closeInformationPopup">Close</button>
            </div>

            <!-- Popup cho "Classes" -->
            <div class="popup" id="classesPopup">
                <!-- Nội dung của popup -->
                <p>Các lớp học đã tham gia </p>
                <ul>
                    <li th:each="class : ${classes}">
                        <span th:text="${class.className}" style="color: #000000"></span>
                    </li>
                </ul>
                <!-- Thêm các thông tin về lớp học -->
                <!-- Button để đóng popup -->
                <button id="closeClassesPopup">Close</button>
            </div>

            <!-- Overlay -->

            </body>
        </div>
    </div>
</nav>